<!DOCTYPE html>
<html>
	<head>
		<title>PennBuddies</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script>
      $(document).ready(function() {
        updateProfile();
      })

      function updateProfile() {
        $.get("/getprofile", function(data) {
          var profile = data.profile;

          var string = '<div class="profile-list"><ul>';

          string += '<label for="id">Student ID: ' + profile._id + '</label><br>';

          string += '<label for="username">Username: ' + profile.username + '</label><br>';

          string += '<label for="password">Password:</label>';
          string += '<input type="text" name="password" size="20" placeholder="*"><br>';

          string += '<label for="name">Full Name:</label>';
          string += '<input type="text" name="name" size="20" placeholder="' + profile.name + '"><br>';

          string += '<label for="phone">Phone Number:</label>';
          string += '<input type="text" name="phone" size="20" placeholder="' + profile.phone + '"><br>';

          string += '<label for="email">Email:</label>';
          string += '<input type="text" name="email" size="20" placeholder="' + profile.email + '"><br>';

          string += '<label for="birthdate">Birthdate:</label>';
          string += '<input type="text" name="birthdate" size="20" placeholder="' + profile.birthdate + '"><br>';

          string += '<label for="height">Height:</label>';
          string += '<input type="text" name="height" size="20" placeholder="' + profile.height + '"><br>';

          string += '<label for="weight">Weight:</label>';
          string += '<input type="text" name="weight" size="20" placeholder="' + profile.weight + '"><br>';

          string += '<label for="hair">Hair Color:</label>';
          string += '<input type="text" name="hair" size="20" placeholder="' + profile.hair + '"><br>';

          string += '<label for="eyes">Eye Color:</label>';
          string += '<input type="text" name="eyes" size="20" placeholder="' + profile.eyes + '"><br>';

          string = string + "</div>";
          $("#profile-block").html(string);
        });
      }
    </script>
	</head>
	<body>
		<div class="container">
			<header>PennBuddies</header>

      <div class="displayuser">
				<%if (req.session.currUser != null) { %>
      		<%=req.session.currUser%>
      	<% } %>
			</div>

			<div class="displayerrormessage">
				<%if (req.query.message != null) { %>
						<div>
							<%= req.query.message %>
						</div>
				<% } %>
			</div>

			<div class="checkeditprofile">
				<form method="post" action="/checkeditprofile">
          <div id="profile-display">
            <br>
            <h4>Edit Profile</h4>
            <div id="profile-block" onload="updateProfile()">
            </div>
          </div>

					<button type="submit">Submit Changes</button>
				</form>
			</div>

		</div>
	</body>
</html>
